import { CardPack, CardRarity } from '@/lib/data/types';

const nonShinyOdds = {
  '♢': [1.0, 1.0, 1.0, 0.0, 0.0],
  '♢♢': [0.0, 0.0, 0.0, 0.9, 0.6],
  '♢♢♢': [0.0, 0.0, 0.0, 0.05, 0.2],
  '♢♢♢♢': [0.0, 0.0, 0.0, 0.01666, 0.06664],
  '☆': [0.0, 0.0, 0.0, 0.02572, 0.10288],
  '☆☆': [0.0, 0.0, 0.0, 0.005, 0.02],
  '☆☆☆': [0.0, 0.0, 0.0, 0.00222, 0.00888],
  '✨': [0.0, 0.0, 0.0, 0.0, 0.0],
  '✨✨': [0.0, 0.0, 0.0, 0.0, 0.0],
  '♛': [0.0, 0.0, 0.0, 0.0004, 0.0016],
};

const shinyOdds = {
  '♢': [1.0, 1.0, 1.0, 0.0, 0.0],
  '♢♢': [0.0, 0.0, 0.0, 0.9, 0.6],
  '♢♢♢': [0.0, 0.0, 0.0, 0.05, 0.2],
  '♢♢♢♢': [0.0, 0.0, 0.0, 0.01666, 0.06664],
  '☆': [0.0, 0.0, 0.0, 0.02572, 0.10288],
  '☆☆': [0.0, 0.0, 0.0, 0.005, 0.02],
  '☆☆☆': [0.0, 0.0, 0.0, 0.00222, 0.00888],
  '✨': [0.0, 0.0, 0.0, 0.0, 0.0],
  '✨✨': [0.0, 0.0, 0.0, 0.0, 0.0],
  '♛': [0.0, 0.0, 0.0, 0.0004, 0.0016],
};

export function getCardOdd(
  pack: CardPack,
  rarity: CardRarity,
  cardIndex: number,
) {
  return (
    (pack.cardByRarity['✨'] > 0
      ? shinyOdds[rarity][cardIndex]
      : nonShinyOdds[rarity][cardIndex]) / pack.cardByRarity[rarity]
  );
}

export const cardIndices = [0, 1, 2, 3, 4];
